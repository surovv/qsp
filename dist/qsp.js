!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.library=n():e.library=n()}(this,function(){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar isObject = function isObject(elem) {\n  return Object.prototype.toString.call(elem) === '[object Object]';\n};\n\nvar flatten = function flatten(array) {\n  return array.reduce(function (flatted, item) {\n    return flatted.concat(Array.isArray(item) ? flatten(item) : item);\n  }, []);\n};\n\nvar convertKeyValToQuery = function convertKeyValToQuery(key, val) {\n  return key + '=' + val;\n};\nvar convertNestedKeyValToQuery = function convertNestedKeyValToQuery(key, val) {\n  return '[' + key + ']=' + val;\n};\n\nvar convertArrayKeyValToQuery = function convertArrayKeyValToQuery(key, val) {\n  return key + '[]=' + val;\n};\nvar convertNestedArrayKeyValToQuery = function convertNestedArrayKeyValToQuery(key, val) {\n  return '[' + key + '][]=' + val;\n};\n\n//const arrayToQuery = convertKeyVal => (key, array) => array.map(val =>\n//  ((convertKeyVal == convertArrayKeyValToQuery && Object.prototype.toString.call(val) === '[object Object]') ?\n//    convertElementToQuery : convertNestedElementToQuery)(key, val, convertKeyVal));\n//arrayToQuery(convertArrayKeyValToQuery);\n//arrayToQuery(convertNestedArrayKeyValToQuery)\nvar convertArrayToQuery = function convertArrayToQuery(key, array) {\n  return array.map(function (elem) {\n    return (isObject(elem) ? convertElementToQuery : convertNestedElementToQuery)(key, elem, convertArrayKeyValToQuery);\n  });\n};\nvar convertNestedArrayToQuery = function convertNestedArrayToQuery(key, array) {\n  return array.map(function (elem) {\n    return convertNestedElementToQuery(key, elem, convertNestedArrayKeyValToQuery);\n  });\n};\n\n// deepest val\nvar appendRootKeyToNestedElement = function appendRootKeyToNestedElement(rkey, elem) {\n  return Array.isArray(elem) ? elem.map(function (elm) {\n    return appendRootKeyToNestedElement(rkey, elm);\n  }) : '' + rkey + elem;\n};\nvar appendRootKey = function appendRootKey(rkey, nestedElements) {\n  return [].concat(nestedElements).map(function (elem) {\n    return appendRootKeyToNestedElement(rkey, elem);\n  });\n};\n\nvar convertObjectToQuery = function convertObjectToQuery(rkey, obj) {\n  return Object.keys(obj).map(function (key) {\n    return convertNestedElementToQuery(key, obj[key], convertNestedKeyValToQuery);\n  }).map(function (nestedStrings) {\n    return appendRootKey(rkey, nestedStrings);\n  });\n};\n\nvar appendNestedKey = function appendNestedKey(key, elem) {\n  return Array.isArray(elem) ? elem.map(function (elm) {\n    return appendNestedKey(key, elm);\n  }) : '[' + key + ']' + elem;\n};\nvar convertNestedObjectToQuery = function convertNestedObjectToQuery(key, obj) {\n  return Object.keys(obj).map(function (k) {\n    return convertNestedElementToQuery(k, obj[k], convertNestedKeyValToQuery);\n  }).map(function (elem) {\n    return appendNestedKey(key, elem);\n  });\n};\n\nvar typesFunctions = {\n  '[object Object]': convertObjectToQuery,\n  '[object Array]': convertArrayToQuery\n};\nvar nestedTypesFunctions = {\n  '[object Object]': convertNestedObjectToQuery,\n  '[object Array]': convertNestedArrayToQuery\n};\n\nvar elementToQuery = function elementToQuery(typesFunctions) {\n  return function (key, val, convertSimpleKeyVal) {\n    return (typesFunctions[Object.prototype.toString.call(val)] || convertSimpleKeyVal)(key, val);\n  };\n};\nvar convertNestedElementToQuery = elementToQuery(nestedTypesFunctions);\nvar convertElementToQuery = elementToQuery(typesFunctions);\n\nvar convertToQuery = exports.convertToQuery = function convertToQuery(obj) {\n  return flatten(Object.keys(obj).map(function (k) {\n    return convertElementToQuery(k, obj[k], convertKeyValToQuery);\n  })).join('&');\n};\n\nvar parseQuery = exports.parseQuery = function parseQuery(query) {\n  return query.split('&').map(function (el) {\n    return el.split('=');\n  }).reduce(function (obj, keyVal) {\n    return _extends({}, obj, _defineProperty({}, keyVal[0], keyVal[1]));\n  }, {});\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/qsp.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/qsp.js?")}])});